{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Bar}from'react-chartjs-2';import{Chart as ChartJS,BarElement,Tooltip,Legend,CategoryScale,LinearScale}from'chart.js';import axios from'axios';import{useNavigate}from'react-router-dom';// Register required Chart.js components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(BarElement,Tooltip,Legend,CategoryScale,LinearScale);const SpendingDistributionBar=()=>{const[budgets,setBudgets]=useState([]);const[error,setError]=useState('');const[chartData,setChartData]=useState(null);const navigate=useNavigate();// Fetch budgets from the API\nuseEffect(()=>{const fetchBudgets=async()=>{try{var _response$data;const token=localStorage.getItem(\"token\");if(!token){setError(\"Unauthorized! Please log in again.\");navigate(\"/login\");return;}const response=await axios.get('https://finance-tracker-backend-0h5z.onrender.com/api/v1/budgets/current-month',{headers:{Authorization:\"Bearer \".concat(token)}});const budgetData=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.budgets)||[];setBudgets(budgetData);}catch(error){console.error(\"Error fetching budgets:\",error);setError(\"Failed to fetch budgets. Please try again.\");}};fetchBudgets();},[navigate]);// Prepare data for the chart\nuseEffect(()=>{if(budgets.length>0){const labels=budgets.map(budget=>budget.name);const data=budgets.map(budget=>budget.spentAmount||0);setChartData({labels,datasets:[{label:'Amount Spent',data,backgroundColor:'rgba(75,192,192,0.6)',borderColor:'rgba(75,192,192,1)',borderWidth:1}]});}else{setChartData(null);}},[budgets]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container h-[60vh]\",children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error}),chartData?/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full p-4 bg-white shadow-lg rounded-lg\",children:/*#__PURE__*/_jsx(Bar,{data:chartData,options:{responsive:true,maintainAspectRatio:false,// To allow custom height\nscales:{x:{grid:{display:true,color:'rgba(0, 0, 0, 0.1)'}},y:{grid:{display:true,color:'rgba(0, 0, 0, 0.1)'},ticks:{beginAtZero:true,stepSize:50// Customize the Y-axis step size\n}}},plugins:{tooltip:{backgroundColor:'rgba(0,0,0,0.8)',titleColor:'#fff',bodyColor:'#fff'},legend:{position:'top',labels:{fontColor:'#333',fontSize:14}}}}})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No data available for the current month.\"})]});};export default SpendingDistributionBar;","map":{"version":3,"names":["React","useState","useEffect","Bar","Chart","ChartJS","BarElement","Tooltip","Legend","CategoryScale","LinearScale","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","register","SpendingDistributionBar","budgets","setBudgets","error","setError","chartData","setChartData","navigate","fetchBudgets","_response$data","token","localStorage","getItem","response","get","headers","Authorization","concat","budgetData","data","console","length","labels","map","budget","name","spentAmount","datasets","label","backgroundColor","borderColor","borderWidth","className","children","options","responsive","maintainAspectRatio","scales","x","grid","display","color","y","ticks","beginAtZero","stepSize","plugins","tooltip","titleColor","bodyColor","legend","position","fontColor","fontSize"],"sources":["C:/Users/Abhishek Kumar Roy/OneDrive/Desktop/finance_tracker/finance_tracker/src/components/SpendingDistributionBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport { \r\n    Chart as ChartJS, \r\n    BarElement, \r\n    Tooltip, \r\n    Legend, \r\n    CategoryScale, \r\n    LinearScale \r\n} from 'chart.js';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// Register required Chart.js components\r\nChartJS.register(BarElement, Tooltip, Legend, CategoryScale, LinearScale);\r\n\r\nconst SpendingDistributionBar = () => {\r\n    const [budgets, setBudgets] = useState([]);\r\n    const [error, setError] = useState('');\r\n    const [chartData, setChartData] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    // Fetch budgets from the API\r\n    useEffect(() => {\r\n        const fetchBudgets = async () => {\r\n            try {\r\n                const token = localStorage.getItem(\"token\");\r\n                if (!token) {\r\n                    setError(\"Unauthorized! Please log in again.\");\r\n                    navigate(\"/login\");\r\n                    return;\r\n                }\r\n\r\n                const response = await axios.get(\r\n                    'https://finance-tracker-backend-0h5z.onrender.com/api/v1/budgets/current-month',\r\n                    {\r\n                        headers: { Authorization: `Bearer ${token}` },\r\n                    }\r\n                );\r\n\r\n                const budgetData = response.data?.budgets || [];\r\n                setBudgets(budgetData);\r\n            } catch (error) {\r\n                console.error(\"Error fetching budgets:\", error);\r\n                setError(\"Failed to fetch budgets. Please try again.\");\r\n            }\r\n        };\r\n\r\n        fetchBudgets();\r\n    }, [navigate]);\r\n\r\n    // Prepare data for the chart\r\n    useEffect(() => {\r\n        if (budgets.length > 0) {\r\n            const labels = budgets.map(budget => budget.name);\r\n            const data = budgets.map(budget => budget.spentAmount || 0);\r\n\r\n            setChartData({\r\n                labels,\r\n                datasets: [\r\n                    {\r\n                        label: 'Amount Spent',\r\n                        data,\r\n                        backgroundColor: 'rgba(75,192,192,0.6)',\r\n                        borderColor: 'rgba(75,192,192,1)',\r\n                        borderWidth: 1,\r\n                    },\r\n                ],\r\n            });\r\n        } else {\r\n            setChartData(null);\r\n        }\r\n    }, [budgets]);\r\n\r\n    return (\r\n        <div className=\"chart-container h-[60vh]\">\r\n            {error && <p className=\"text-red-500\">{error}</p>}\r\n            {chartData ? (\r\n                <div className=\"w-full h-full p-4 bg-white shadow-lg rounded-lg\">\r\n                    <Bar data={chartData} options={{\r\n                        responsive: true,\r\n                        maintainAspectRatio: false, // To allow custom height\r\n                        scales: {\r\n                            x: {\r\n                                grid: {\r\n                                    display: true,\r\n                                    color: 'rgba(0, 0, 0, 0.1)',\r\n                                },\r\n                            },\r\n                            y: {\r\n                                grid: {\r\n                                    display: true,\r\n                                    color: 'rgba(0, 0, 0, 0.1)',\r\n                                },\r\n                                ticks: {\r\n                                    beginAtZero: true,\r\n                                    stepSize: 50, // Customize the Y-axis step size\r\n                                },\r\n                            },\r\n                        },\r\n                        plugins: {\r\n                            tooltip: {\r\n                                backgroundColor: 'rgba(0,0,0,0.8)',\r\n                                titleColor: '#fff',\r\n                                bodyColor: '#fff',\r\n                            },\r\n                            legend: {\r\n                                position: 'top',\r\n                                labels: {\r\n                                    fontColor: '#333',\r\n                                    fontSize: 14,\r\n                                },\r\n                            },\r\n                        },\r\n                    }} />\r\n                </div>\r\n            ) : (\r\n                <p className=\"text-gray-500\">No data available for the current month.</p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SpendingDistributionBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}