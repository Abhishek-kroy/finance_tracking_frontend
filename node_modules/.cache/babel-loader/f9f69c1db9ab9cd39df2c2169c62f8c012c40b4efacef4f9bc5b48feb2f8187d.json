{"ast":null,"code":"import React,{useEffect,useRef,useCallback}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const ReCaptchaV2Label=_ref=>{let{onVerify}=_ref;const captchaRef=useRef(null);// Define `renderRecaptcha` using `useCallback` to memoize the function\nconst renderRecaptcha=useCallback(()=>{if(captchaRef.current){window.grecaptcha.render(captchaRef.current,{sitekey:process.env.REACT_APP_SITE_KEY_RECAPTCHA,callback:token=>onVerify(token)// Callback function when reCAPTCHA is completed\n});}},[onVerify]);// Include `onVerify` because it's used inside `renderRecaptcha`\n// Function to wait for the grecaptcha object to be available\nconst waitForGrecaptcha=useCallback(()=>{return new Promise(resolve=>{const interval=setInterval(()=>{if(window.grecaptcha&&window.grecaptcha.render){clearInterval(interval);resolve();}},100);// Check every 100ms\n});},[]);useEffect(()=>{// Dynamically load the reCAPTCHA script\nif(!window.grecaptcha){const script=document.createElement(\"script\");script.src=\"https://www.google.com/recaptcha/api.js\";script.async=true;script.defer=true;document.body.appendChild(script);script.onload=()=>{waitForGrecaptcha().then(renderRecaptcha);};return()=>{document.body.removeChild(script);};}else{waitForGrecaptcha().then(renderRecaptcha);}},[waitForGrecaptcha,renderRecaptcha]);// Add dependencies\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"div\",{ref:captchaRef})});};export default ReCaptchaV2Label;","map":{"version":3,"names":["React","useEffect","useRef","useCallback","jsx","_jsx","ReCaptchaV2Label","_ref","onVerify","captchaRef","renderRecaptcha","current","window","grecaptcha","render","sitekey","process","env","REACT_APP_SITE_KEY_RECAPTCHA","callback","token","waitForGrecaptcha","Promise","resolve","interval","setInterval","clearInterval","script","document","createElement","src","async","defer","body","appendChild","onload","then","removeChild","className","children","ref"],"sources":["C:/Users/Abhishek Kumar Roy/OneDrive/Desktop/finance_tracker/finance_tracker/src/components/ReCaptcha.js"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from \"react\";\r\n\r\nconst ReCaptchaV2Label = ({ onVerify }) => {\r\n  const captchaRef = useRef(null);\r\n\r\n  // Define `renderRecaptcha` using `useCallback` to memoize the function\r\n  const renderRecaptcha = useCallback(() => {\r\n    if (captchaRef.current) {\r\n      window.grecaptcha.render(captchaRef.current, {\r\n        sitekey: process.env.REACT_APP_SITE_KEY_RECAPTCHA,\r\n        callback: (token) => onVerify(token), // Callback function when reCAPTCHA is completed\r\n      });\r\n    }\r\n  }, [onVerify]); // Include `onVerify` because it's used inside `renderRecaptcha`\r\n\r\n  // Function to wait for the grecaptcha object to be available\r\n  const waitForGrecaptcha = useCallback(() => {\r\n    return new Promise((resolve) => {\r\n      const interval = setInterval(() => {\r\n        if (window.grecaptcha && window.grecaptcha.render) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        }\r\n      }, 100); // Check every 100ms\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Dynamically load the reCAPTCHA script\r\n    if (!window.grecaptcha) {\r\n      const script = document.createElement(\"script\");\r\n      script.src = \"https://www.google.com/recaptcha/api.js\";\r\n      script.async = true;\r\n      script.defer = true;\r\n      document.body.appendChild(script);\r\n\r\n      script.onload = () => {\r\n        waitForGrecaptcha().then(renderRecaptcha);\r\n      };\r\n\r\n      return () => {\r\n        document.body.removeChild(script);\r\n      };\r\n    } else {\r\n      waitForGrecaptcha().then(renderRecaptcha);\r\n    }\r\n  }, [waitForGrecaptcha, renderRecaptcha]); // Add dependencies\r\n\r\n  return (\r\n    <div className=\"mb-4\">\r\n      <div ref={captchaRef}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReCaptchaV2Label;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9D,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpC,KAAM,CAAAE,UAAU,CAAGP,MAAM,CAAC,IAAI,CAAC,CAE/B;AACA,KAAM,CAAAQ,eAAe,CAAGP,WAAW,CAAC,IAAM,CACxC,GAAIM,UAAU,CAACE,OAAO,CAAE,CACtBC,MAAM,CAACC,UAAU,CAACC,MAAM,CAACL,UAAU,CAACE,OAAO,CAAE,CAC3CI,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,4BAA4B,CACjDC,QAAQ,CAAGC,KAAK,EAAKZ,QAAQ,CAACY,KAAK,CAAG;AACxC,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACZ,QAAQ,CAAC,CAAC,CAAE;AAEhB;AACA,KAAM,CAAAa,iBAAiB,CAAGlB,WAAW,CAAC,IAAM,CAC1C,MAAO,IAAI,CAAAmB,OAAO,CAAEC,OAAO,EAAK,CAC9B,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjC,GAAIb,MAAM,CAACC,UAAU,EAAID,MAAM,CAACC,UAAU,CAACC,MAAM,CAAE,CACjDY,aAAa,CAACF,QAAQ,CAAC,CACvBD,OAAO,CAAC,CAAC,CACX,CACF,CAAC,CAAE,GAAG,CAAC,CAAE;AACX,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAENtB,SAAS,CAAC,IAAM,CACd;AACA,GAAI,CAACW,MAAM,CAACC,UAAU,CAAE,CACtB,KAAM,CAAAc,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,GAAG,CAAG,yCAAyC,CACtDH,MAAM,CAACI,KAAK,CAAG,IAAI,CACnBJ,MAAM,CAACK,KAAK,CAAG,IAAI,CACnBJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,MAAM,CAAC,CAEjCA,MAAM,CAACQ,MAAM,CAAG,IAAM,CACpBd,iBAAiB,CAAC,CAAC,CAACe,IAAI,CAAC1B,eAAe,CAAC,CAC3C,CAAC,CAED,MAAO,IAAM,CACXkB,QAAQ,CAACK,IAAI,CAACI,WAAW,CAACV,MAAM,CAAC,CACnC,CAAC,CACH,CAAC,IAAM,CACLN,iBAAiB,CAAC,CAAC,CAACe,IAAI,CAAC1B,eAAe,CAAC,CAC3C,CACF,CAAC,CAAE,CAACW,iBAAiB,CAAEX,eAAe,CAAC,CAAC,CAAE;AAE1C,mBACEL,IAAA,QAAKiC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBlC,IAAA,QAAKmC,GAAG,CAAE/B,UAAW,CAAM,CAAC,CACzB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}